<div class="timer-vertical-center">
  <div class="timer-container">
    <form (ngSubmit)="startTimer()">
      <ion-item>
        <ion-label>Preparation</ion-label>
        <app-time-picker
          [hours]="prepTimeHrs"
          [minutes]="prepTimeMins"
          [seconds]="prepTimeSecs"
          (timeChange)="onPrepTimeChange($event)">
        </app-time-picker>
      </ion-item>
      <div *ngIf="(prepTimeHrs * 3600 + prepTimeMins * 60 + prepTimeSecs) < 5" style="color: #ff1744; font-size: 0.95em; margin-bottom: 8px;">
        Preparation time must be at least 5 seconds.
      </div>

      <!-- Work Time Picker (hrs, mins, secs) -->
        <ion-item >
          <ion-label>Work</ion-label>
          <app-time-picker
            [hours]="workTimeHrs"
            [minutes]="workTimeMins"
            [seconds]="workTimeSecs"
            (timeChange)="onWorkTimeChange($event)">
          </app-time-picker>
        </ion-item>
      <div *ngIf="(workTimeHrs * 3600 + workTimeMins * 60 + workTimeSecs) < 5" style="color: #ff1744; font-size: 0.95em; margin-bottom: 8px;">
        Work time must be at least 5 seconds.
      </div>

      <ion-item>
        <ion-label>Rest</ion-label>
        <app-time-picker
          [hours]="restTimeHrs"
          [minutes]="restTimeMins"
          [seconds]="restTimeSecs"
          (timeChange)="onRestTimeChange($event)">
        </app-time-picker>
      </ion-item>
      <div *ngIf="(restTimeHrs * 3600 + restTimeMins * 60 + restTimeSecs) < 5" style="color: #ff1744; font-size: 0.95em; margin-bottom: 8px;">
        Rest time must be at least 5 seconds.
      </div>

      <ion-item>
        <ion-label position="floating">Number of Sets</ion-label>
        <ion-input type="number" [(ngModel)]="sets" name="sets"></ion-input>
      </ion-item>
      <ng-container *ngIf="(!isRunning && !isPaused) || currentPhase === 'Workout Complete!'">
        <ion-button expand="full" type="submit"
          [disabled]="
            (prepTimeHrs * 3600 + prepTimeMins * 60 + prepTimeSecs) < 5 ||
            (workTimeHrs * 3600 + workTimeMins * 60 + workTimeSecs) < 5 ||
            (restTimeHrs * 3600 + restTimeMins * 60 + restTimeSecs) < 5
          ">
          Start Timer
        </ion-button>
      </ng-container>
      <ng-container *ngIf="isRunning && currentPhase !== 'Workout Complete!'">
        <ion-button expand="full" color="warning" type="button" (click)="pauseTimer()">Pause Timer</ion-button>
        <ion-button expand="full" color="danger" type="button" (click)="stopTimer()">Stop Timer</ion-button>
      </ng-container>
      <ng-container *ngIf="isPaused && currentPhase !== 'Workout Complete!'">
        <ion-button expand="full" color="primary" type="button" (click)="resumeTimer()">Resume Timer</ion-button>
        <ion-button expand="full" color="danger" type="button" (click)="stopTimer()">Stop Timer</ion-button>
      </ng-container>
    </form>
    <div *ngIf="currentPhase" class="timer-display themed-timer-display">
      <h2>{{ currentPhase }}</h2>
      <h1>{{ displayTime }}</h1>
      <p>Set: {{ currentSet }} / {{ sets }}</p>
    </div>
  </div>
</div>
